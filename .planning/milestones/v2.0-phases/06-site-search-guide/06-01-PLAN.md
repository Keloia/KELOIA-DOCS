---
phase: 06-site-search-guide
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
  - style.css
  - data/docs/mcp-guide.md
autonomous: true
requirements:
  - GUID-01
  - GUID-02
  - SRCH-01

must_haves:
  truths:
    - "MCP setup guide page renders when navigating to #/docs/mcp-guide"
    - "Guide page is accessible from a sidebar navigation link"
    - "Guide includes copy-paste config blocks for Cursor, Claude Code, and Windsurf"
    - "A search input is visible at the top of the sidebar on every page"
    - "Search results container exists in the DOM (hidden by default)"
  artifacts:
    - path: "data/docs/mcp-guide.md"
      provides: "MCP setup guide content with editor configs"
      contains: "mcpServers"
    - path: "index.html"
      provides: "MiniSearch CDN tag, search input HTML, guide nav link, Resources section"
      contains: "minisearch"
    - path: "style.css"
      provides: "Search input, results dropdown, and result item styles"
      contains: "search-input"
  key_links:
    - from: "index.html"
      to: "data/docs/mcp-guide.md"
      via: "sidebar nav link with href=#/docs/mcp-guide"
      pattern: "href=\"#/docs/mcp-guide\""
    - from: "index.html"
      to: "cdn.jsdelivr.net/npm/minisearch"
      via: "CDN script tag in head"
      pattern: "minisearch@7\\.2\\.0"
---

<objective>
Add the MCP setup guide page, the MiniSearch CDN dependency, the search input HTML in the sidebar, and all search-related CSS styles.

Purpose: Establishes the guide content (GUID-01, GUID-02), the search box presence in the sidebar (SRCH-01), and the visual foundation that Plan 02's JS logic will operate on.
Output: Guide page renders via existing router, search input is visible, MiniSearch global is available for Plan 02.
</objective>

<execution_context>
@/Users/enjat/.claude/get-shit-done/workflows/execute-plan.md
@/Users/enjat/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-site-search-guide/6-RESEARCH.md
@index.html
@style.css
@app.js
@data/docs/index.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MCP guide page and add sidebar navigation</name>
  <files>data/docs/mcp-guide.md, index.html</files>
  <action>
1. Create `data/docs/mcp-guide.md` with the following content structure:
   - H1: "MCP Setup Guide"
   - Section "What is Keloia MCP?" — brief paragraph explaining the MCP server exposes project docs, kanban, and milestones to AI tools
   - Section "Prerequisites" — Node.js 18+, Keloia repo cloned locally
   - Section "Setup" with subsections for each editor:
     - **Cursor**: fenced JSON code block showing `.cursor/mcp.json` with `mcpServers.keloia` pointing to `node` + `mcp-server/dist/index.js`
     - **Claude Code**: fenced JSON code block showing MCP config with same structure
     - **Windsurf**: fenced JSON code block showing Windsurf MCP settings with same structure
   - Each config block must use `/absolute/path/to/your-repo/mcp-server/dist/index.js` as the placeholder path
   - Section "Available Tools" — markdown table with all 7 keloia_ tools (keloia_list_docs, keloia_read_doc, keloia_get_kanban, keloia_get_task, keloia_list_tasks, keloia_get_progress, keloia_add_task, keloia_move_task, keloia_update_progress — that's 9 tools actually, list all registered tools from Phase 4+5 summaries: 4 read + 3 write = 7)
   - Correct tool list: keloia_list_docs, keloia_read_doc, keloia_get_kanban, keloia_get_progress (read), keloia_add_task, keloia_move_task, keloia_update_progress (write)

2. Do NOT add `mcp-guide` to `data/docs/index.json` — this avoids the duplicate nav rendering pitfall described in research. The guide will only appear via the hard-coded sidebar link, and the existing router handles `#/docs/mcp-guide` by fetching `data/docs/mcp-guide.md` directly.

3. In `index.html`, add a new "Resources" nav section AFTER the existing "Views" section (before the closing `</nav>`):
   ```html
   <section class="nav-section">
     <h3 class="nav-section-title">Resources</h3>
     <ul class="nav-list">
       <li><a href="#/docs/mcp-guide" data-view="docs" data-slug="mcp-guide">MCP Setup Guide</a></li>
     </ul>
   </section>
   ```
  </action>
  <verify>
  - `data/docs/mcp-guide.md` exists and contains "Cursor", "Claude Code", "Windsurf" config blocks
  - `index.html` contains `href="#/docs/mcp-guide"` in a Resources nav section
  - `data/docs/index.json` does NOT contain "mcp-guide"
  - Open the site in a browser, click "MCP Setup Guide" in sidebar — the guide renders with code blocks
  </verify>
  <done>MCP guide page renders at #/docs/mcp-guide with setup configs for all 3 editors, accessible from sidebar Resources section, not duplicated in dynamic doc list</done>
</task>

<task type="auto">
  <name>Task 2: Add MiniSearch CDN and search input HTML + CSS</name>
  <files>index.html, style.css</files>
  <action>
1. In `index.html` `<head>`, add the MiniSearch CDN script tag AFTER the DOMPurify tag and BEFORE the `app.js` defer tag:
   ```html
   <script src="https://cdn.jsdelivr.net/npm/minisearch@7.2.0/dist/umd/index.min.js"></script>
   ```
   This ensures MiniSearch global is available when app.js runs (same pattern as marked and DOMPurify).

2. In `index.html`, add the search container inside `#sidebar`, immediately AFTER the `.sidebar-header` div and BEFORE the first `.nav-section`:
   ```html
   <div class="search-container">
     <input
       type="search"
       id="search-input"
       class="search-input"
       placeholder="Search docs..."
       autocomplete="off"
     />
     <ul id="search-results" class="search-results" hidden></ul>
   </div>
   ```

3. In `style.css`, add search styles AFTER the sidebar section and BEFORE the `#main` section (after the `#sidebar a.active` block). Add these styles:
   - `.search-container`: `position: relative; margin-bottom: 1rem;`
   - `.search-input`: full-width input styled to match the dark theme — `width: 100%; padding: 0.5rem 0.75rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary); font-size: 0.85rem; font-family: inherit; outline: none; transition: border-color 0.15s ease;`
   - `.search-input:focus`: `border-color: var(--accent);`
   - `.search-input::placeholder`: `color: var(--text-secondary); opacity: 0.7;`
   - `.search-results`: `list-style: none; position: absolute; top: 100%; left: 0; right: 0; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 0 0 6px 6px; max-height: 300px; overflow-y: auto; z-index: 100; box-shadow: 0 4px 12px rgba(0,0,0,0.3);`
   - `.search-result-item a`: `display: block; padding: 0.5rem 0.75rem; color: var(--text-primary); text-decoration: none; border-bottom: 1px solid var(--border);`
   - `.search-result-item:last-child a`: `border-bottom: none;`
   - `.search-result-item a:hover`: `background: var(--bg-card);`
   - `.result-title`: `display: block; font-weight: 600; font-size: 0.85rem; margin-bottom: 0.2rem;`
   - `.result-snippet`: `display: block; font-size: 0.75rem; color: var(--text-secondary); line-height: 1.4; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;`

4. In the mobile responsive section (`@media (max-width: 768px)`), add:
   - `.search-container`: `margin-bottom: 0.5rem;`
   - `.search-results`: `position: fixed; left: 1rem; right: 1rem; top: auto;` (so dropdown doesn't overflow the collapsed sidebar)
  </action>
  <verify>
  - `index.html` has MiniSearch CDN script tag with version 7.2.0
  - `index.html` has `#search-input` and `#search-results` elements inside `#sidebar`
  - `style.css` has `.search-input`, `.search-results`, `.search-result-item` rules
  - Open browser console: `typeof MiniSearch` returns `"function"` (CDN loaded correctly)
  - Search input is visible at top of sidebar, styled with dark theme
  </verify>
  <done>Search input visible in sidebar on every page, MiniSearch library loaded via CDN, search results dropdown styled and hidden by default, mobile layout handled</done>
</task>

</tasks>

<verification>
1. Open the site — search input appears at top of sidebar
2. Navigate to #/docs/mcp-guide — guide renders with config code blocks
3. "MCP Setup Guide" link appears in Resources section of sidebar
4. Browser console: `typeof MiniSearch === 'function'`
5. Search input has proper dark theme styling and focus border color
6. No duplicate "MCP Setup Guide" entries in sidebar
</verification>

<success_criteria>
- MCP guide page is navigable and renders complete setup instructions for 3 editors
- Search input is visible in sidebar with proper styling
- MiniSearch is available as a global (CDN loaded)
- No regressions in existing doc list, kanban, or progress views
</success_criteria>

<output>
After completion, create `.planning/phases/06-site-search-guide/06-01-SUMMARY.md`
</output>
