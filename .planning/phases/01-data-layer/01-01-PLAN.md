---
phase: 01-data-layer
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .nojekyll
  - data/docs/architecture.md
  - data/docs/value-proposition.md
  - data/kanban/index.json
  - data/kanban/task-001.json
  - data/kanban/task-002.json
  - data/kanban/task-003.json
  - data/kanban/task-004.json
  - data/progress/index.json
  - data/progress/milestone-01.json
  - data/progress/milestone-02.json
  - data/progress/milestone-03.json
  - data/progress/milestone-04.json
  - data/progress/milestone-05.json
autonomous: true
requirements:
  - DATA-01
  - DATA-02
  - DATA-03
  - DATA-04

must_haves:
  truths:
    - "data/docs/ contains at least one real markdown file viewable in GitHub UI"
    - "data/kanban/ contains an index.json with columns array and task registry, plus individual task files with id/title/column/description/assignee"
    - "data/progress/ contains an index.json with milestone registry, plus individual milestone files with phase/title/status/tasksTotal/tasksCompleted"
    - "Both index.json files contain schemaVersion: 1"
    - "All JSON files are valid JSON parseable without errors"
  artifacts:
    - path: "data/docs/architecture.md"
      provides: "Seed documentation file for architecture"
      min_lines: 10
    - path: "data/docs/value-proposition.md"
      provides: "Seed documentation file for value proposition"
      min_lines: 10
    - path: "data/kanban/index.json"
      provides: "Kanban schema anchor with columns and task registry"
      contains: "schemaVersion"
    - path: "data/kanban/task-001.json"
      provides: "Seed kanban task"
      contains: "column"
    - path: "data/progress/index.json"
      provides: "Progress schema anchor with milestone registry"
      contains: "schemaVersion"
    - path: "data/progress/milestone-01.json"
      provides: "Seed milestone mapping to Phase 1"
      contains: "tasksTotal"
    - path: ".nojekyll"
      provides: "Disables Jekyll processing on GitHub Pages"
  key_links:
    - from: "data/kanban/index.json"
      to: "data/kanban/task-*.json"
      via: "tasks array lists task IDs matching filenames"
      pattern: "task-00[1-4]"
    - from: "data/progress/index.json"
      to: "data/progress/milestone-*.json"
      via: "milestones array lists milestone IDs matching filenames"
      pattern: "milestone-0[1-5]"
---

<objective>
Create the shared filesystem data layer — seed documentation, define kanban and progress JSON schemas with split-file structure, and populate with initial content.

Purpose: Lock the data contracts that both the static site (Phase 2) and MCP server (Phases 3-5) will build against. Everything under `data/` is the single source of truth.
Output: `data/docs/` with markdown files, `data/kanban/` with index + task files, `data/progress/` with index + milestone files, plus `.nojekyll` at repo root.
</objective>

<execution_context>
@/Users/enjat/.claude/get-shit-done/workflows/execute-plan.md
@/Users/enjat/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-data-layer/01-CONTEXT.md
@.planning/phases/01-data-layer/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Seed documentation files and create .nojekyll</name>
  <files>
    .nojekyll
    data/docs/architecture.md
    data/docs/value-proposition.md
  </files>
  <action>
Create an empty `.nojekyll` file at the repo root to prevent GitHub Pages Jekyll processing (which can mangle `_` prefixed directories and double-brace expressions).

Create `data/docs/` directory and add two seed markdown files:

1. `data/docs/architecture.md` — Write a real architecture overview for the Keloia project. Content should cover:
   - Project purpose (documentation + MCP server in one repo)
   - Dual-surface approach (GitHub Pages for humans, MCP for AI tools)
   - Data layer design (filesystem as database, `data/` directory structure)
   - Technology choices (vanilla JS, no build step, marked.js from CDN)
   - Keep it factual and useful — this will be the first doc visible in the site

2. `data/docs/value-proposition.md` — Write the value proposition for Keloia:
   - Core value: when a file changes, both humans and AI see the update immediately
   - No build pipeline, no deploy step, no sync between surfaces
   - Single source of truth (filesystem)
   - Target audience: solo developers using Claude Code

Both files must use standard CommonMark markdown, `.md` extension, no YAML frontmatter, no Liquid template syntax. They must render correctly in the GitHub UI.

Per user decision: flat structure inside `data/docs/` — no subdirectories.
  </action>
  <verify>
Confirm files exist and are valid markdown:
- `ls data/docs/` shows `architecture.md` and `value-proposition.md`
- `cat data/docs/architecture.md | head -5` shows a markdown heading
- `cat data/docs/value-proposition.md | head -5` shows a markdown heading
- `test -f .nojekyll` confirms `.nojekyll` exists
  </verify>
  <done>
`data/docs/` contains two markdown files with real, substantive content (not placeholder). `.nojekyll` exists at repo root. Files are valid CommonMark renderable by GitHub.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create kanban schema and seed tasks</name>
  <files>
    data/kanban/index.json
    data/kanban/task-001.json
    data/kanban/task-002.json
    data/kanban/task-003.json
    data/kanban/task-004.json
  </files>
  <action>
Create `data/kanban/` directory with an index file and four seed task files using the split-file-per-task pattern.

**`data/kanban/index.json`** — Schema anchor:
```json
{
  "schemaVersion": 1,
  "columns": ["Backlog", "In Progress", "Done"],
  "tasks": ["task-001", "task-002", "task-003", "task-004"]
}
```

**Task files** — Each task maps to a DATA requirement and represents real Phase 1 work. Schema per task:
- `id` (string): matches filename, format `task-NNN`
- `title` (string): short task description
- `column` (string): one of `"Backlog"`, `"In Progress"`, `"Done"` — constrained to values in index.json columns array
- `description` (string or null): optional longer description
- `assignee` (string or null): optional, use `null` for unassigned

Seed tasks representing the current phase work:
1. `task-001.json`: "Seed docs directory with markdown files" — column: "Backlog", description about creating data/docs/ content
2. `task-002.json`: "Define kanban board JSON schema" — column: "Backlog", description about the split-file kanban structure
3. `task-003.json`: "Define progress tracker JSON schema" — column: "Backlog", description about the split-file progress structure
4. `task-004.json`: "Add schemaVersion to data files" — column: "Backlog", description about DATA-04 requirement

All optional fields with no value must use `null` (not omitted, not empty string). Per user decision: no priority field, no labels, no dates, no tags.
  </action>
  <verify>
Validate all JSON files parse correctly:
- `node -e "JSON.parse(require('fs').readFileSync('data/kanban/index.json','utf8'))"` — no error
- `node -e "const f=require('fs');['task-001','task-002','task-003','task-004'].forEach(t=>{const d=JSON.parse(f.readFileSync('data/kanban/'+t+'.json','utf8'));console.log(d.id,d.column)})"` — prints all task IDs and columns
- Confirm `index.json` has `schemaVersion: 1`
- Confirm `index.json` tasks array length matches number of task files
- Confirm each task's `column` value is one of the three valid columns
  </verify>
  <done>
`data/kanban/index.json` exists with `schemaVersion: 1`, three columns, and four task IDs. Four task files exist with valid lean schema (id, title, column, description, assignee). All JSON parses without error.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create progress schema and seed milestones</name>
  <files>
    data/progress/index.json
    data/progress/milestone-01.json
    data/progress/milestone-02.json
    data/progress/milestone-03.json
    data/progress/milestone-04.json
    data/progress/milestone-05.json
  </files>
  <action>
Create `data/progress/` directory with an index file and five milestone files (one per roadmap phase).

**`data/progress/index.json`** — Schema anchor:
```json
{
  "schemaVersion": 1,
  "milestones": ["milestone-01", "milestone-02", "milestone-03", "milestone-04", "milestone-05"]
}
```

**Milestone files** — Each maps to a roadmap phase. Schema per milestone:
- `id` (string): matches filename, format `milestone-NN`
- `phase` (number): phase number (1-5)
- `title` (string): phase title from roadmap
- `status` (string): one of `"pending"`, `"in-progress"`, `"complete"`
- `tasksTotal` (number): total tasks for this milestone
- `tasksCompleted` (number): completed tasks count
- `notes` (string or null): optional context

Seed milestones from the roadmap:
1. `milestone-01.json`: phase 1, "Data Layer", status "in-progress", tasksTotal: 4, tasksCompleted: 0, notes about establishing data contracts
2. `milestone-02.json`: phase 2, "Static Site", status "pending", tasksTotal: 0, tasksCompleted: 0, notes null
3. `milestone-03.json`: phase 3, "MCP Foundation", status "pending", tasksTotal: 0, tasksCompleted: 0, notes null
4. `milestone-04.json`: phase 4, "MCP Read Tools", status "pending", tasksTotal: 0, tasksCompleted: 0, notes null
5. `milestone-05.json`: phase 5, "MCP Write Tools + Integration", status "pending", tasksTotal: 0, tasksCompleted: 0, notes null

Progress percentage is NOT stored — it is calculated at read time by consumers: `(tasksCompleted / tasksTotal) * 100`. Per user decision: task-count driven, no manual percentage override.

All optional fields with no value must use `null` (not omitted, not empty string).
  </action>
  <verify>
Validate all JSON files parse correctly:
- `node -e "JSON.parse(require('fs').readFileSync('data/progress/index.json','utf8'))"` — no error
- `node -e "const f=require('fs');for(let i=1;i<=5;i++){const d=JSON.parse(f.readFileSync('data/progress/milestone-0'+i+'.json','utf8'));console.log(d.id,d.phase,d.status)}"` — prints all milestone IDs, phases, and statuses
- Confirm `index.json` has `schemaVersion: 1`
- Confirm `index.json` milestones array length is 5
- Confirm milestone-01 has status "in-progress" and tasksTotal: 4
- Confirm milestones 02-05 have status "pending"
  </verify>
  <done>
`data/progress/index.json` exists with `schemaVersion: 1` and five milestone IDs. Five milestone files exist with valid schema (id, phase, title, status, tasksTotal, tasksCompleted, notes). Milestone-01 reflects current phase work. All JSON parses without error.
  </done>
</task>

</tasks>

<verification>
Run comprehensive validation across all created files:

1. **Directory structure check:**
   ```
   ls -R data/
   ```
   Expected: `data/docs/` (2 .md files), `data/kanban/` (5 .json files), `data/progress/` (6 .json files)

2. **JSON validity check (all files):**
   ```
   find data -name "*.json" -exec node -e "JSON.parse(require('fs').readFileSync('{}','utf8'));console.log('OK: {}')" \;
   ```

3. **schemaVersion check:**
   ```
   node -e "const f=require('fs');['data/kanban/index.json','data/progress/index.json'].forEach(p=>{const d=JSON.parse(f.readFileSync(p,'utf8'));console.log(p,d.schemaVersion===1?'OK':'FAIL')})"
   ```

4. **Index-to-entity consistency:**
   - kanban index.tasks array IDs all have corresponding task-*.json files
   - progress index.milestones array IDs all have corresponding milestone-*.json files

5. **`.nojekyll` exists at repo root**
</verification>

<success_criteria>
- `data/docs/` contains 2 markdown files with substantive content, viewable in GitHub UI
- `data/kanban/index.json` has schemaVersion: 1, 3 columns, 4 task references
- 4 individual task JSON files with lean schema (no priority, no labels, no dates)
- `data/progress/index.json` has schemaVersion: 1, 5 milestone references
- 5 individual milestone JSON files mapping to roadmap phases
- All JSON files parse without error
- `.nojekyll` exists at repo root
- No computed percentage fields stored in progress data
</success_criteria>

<output>
After completion, create `.planning/phases/01-data-layer/01-01-SUMMARY.md`
</output>
