---
phase: 02-static-site
plan: 02
type: execute
wave: 2
depends_on: [02-01]
files_modified:
  - app.js
  - style.css
autonomous: false
requirements: [SITE-03, SITE-04]

must_haves:
  truths:
    - "Navigating to #/kanban shows columns with task cards fetched from data/kanban/"
    - "Kanban cards are color-coded by column (Backlog=gray, In Progress=blue, Done=green)"
    - "Navigating to #/progress shows milestone modules with progress bars fetched from data/progress/"
    - "Progress bars reflect tasksCompleted/tasksTotal ratio calculated at render time"
  artifacts:
    - path: "app.js"
      provides: "Kanban and progress view rendering functions"
      contains: "renderKanban"
    - path: "style.css"
      provides: "Kanban column layout, card styles, progress bar styles"
      contains: "kanban-column"
  key_links:
    - from: "app.js"
      to: "data/kanban/index.json"
      via: "fetch in renderKanban for column list and task IDs"
      pattern: "fetch.*data/kanban/index\\.json"
    - from: "app.js"
      to: "data/kanban/task-*.json"
      via: "Promise.all fan-out fetch for individual tasks"
      pattern: "Promise\\.all"
    - from: "app.js"
      to: "data/progress/index.json"
      via: "fetch in renderProgress for milestone IDs"
      pattern: "fetch.*data/progress/index\\.json"
    - from: "app.js"
      to: "data/progress/milestone-*.json"
      via: "Promise.all fan-out fetch for individual milestones"
      pattern: "fetch.*data/progress/milestone"
---

<objective>
Implement the kanban board and progress tracker views, replacing the placeholders from Plan 01 with real data-driven rendering.

Purpose: Complete the remaining two SPA views so all three content types (docs, kanban, progress) are viewable through the site.
Output: Working kanban board with column-based color-coding and progress tracker with computed progress bars.
</objective>

<execution_context>
@/Users/enjat/.claude/get-shit-done/workflows/execute-plan.md
@/Users/enjat/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-static-site/02-RESEARCH.md
@.planning/phases/02-static-site/02-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement kanban board view with column-based color-coding</name>
  <files>app.js, style.css</files>
  <action>
Replace the `renderKanban()` placeholder in `app.js` with a full implementation:

**Data fetching (split-file fan-out pattern):**
- Fetch `data/kanban/index.json` (relative path, no leading slash) to get columns array and task IDs
- Use `Promise.all` to fetch all individual task files: `data/kanban/${id}.json`
- Handle fetch errors gracefully — show error message in `#main` if fetch fails

**Rendering:**
- Create a flex row container for columns (`.kanban-board`)
- For each column from `index.columns`: create a `.kanban-column` div
- Column header (`<h3>`) with column name and task count badge
- Filter tasks where `task.column === columnName` and render each as a `.kanban-card`
- Card content: title (escaped — use a simple `escapeHtml()` helper that replaces `<>&"'`), description truncated to ~100 chars if present, assignee if not null
- Add column-specific CSS class: `.column-backlog`, `.column-in-progress`, `.column-done` (derive class from column name: lowercase, replace spaces with hyphens)

**Color-coding interpretation for SITE-03:**
Per research recommendation, "priority color-coding" is interpreted as column-based color-coding since the task schema has no `priority` field (Phase 1 decision). Colors:
- Backlog: `var(--col-backlog)` (gray #6c757d) — top border or left accent on cards
- In Progress: `var(--col-in-progress)` (blue #4a9eff) — top border or left accent on cards
- Done: `var(--col-done)` (green #2ed573) — top border or left accent on cards

**Add kanban styles to `style.css`:**
- `.kanban-board`: display flex, gap 1rem, overflow-x auto for mobile, padding
- `.kanban-column`: flex 1, min-width 250px, bg-secondary background, border-radius, padding
- `.kanban-column h3`: column header with count badge
- `.kanban-card`: bg-card background, border-radius, padding, margin-bottom, border-left 3px solid with column color
- `.column-backlog .kanban-card`: border-left-color var(--col-backlog)
- `.column-in-progress .kanban-card`: border-left-color var(--col-in-progress)
- `.column-done .kanban-card`: border-left-color var(--col-done)
- Card hover state: slight brightness increase or border highlight
- `.card-title`: font-weight 600
- `.card-description`: text-secondary, font-size smaller, margin-top
- `.card-assignee`: small badge or tag style

**CRITICAL:** All fetch paths relative (no leading slash). Use `escapeHtml()` on any user-generated content before innerHTML assignment to prevent XSS from JSON data.
  </action>
  <verify>
- Navigate to `#/kanban` — shows three columns (Backlog, In Progress, Done)
- Each column shows its tasks with correct content from JSON files
- Cards have column-based color accents (gray/blue/green left border)
- Browser DevTools Network tab shows fetches to `data/kanban/index.json` and individual task files
- No leading-slash paths in any fetch call
  </verify>
  <done>Kanban board renders columns and cards from live JSON data with column-based color-coding</done>
</task>

<task type="auto">
  <name>Task 2: Implement progress tracker view with computed progress bars</name>
  <files>app.js, style.css</files>
  <action>
Replace the `renderProgress()` placeholder in `app.js` with a full implementation:

**Data fetching (split-file fan-out pattern):**
- Fetch `data/progress/index.json` (relative path) to get milestone IDs
- Use `Promise.all` to fetch all individual milestone files: `data/progress/${id}.json`
- Handle fetch errors gracefully

**Rendering:**
- Create a `.progress-tracker` container
- Page heading: "Project Progress"
- For each milestone, create a `.milestone-card`:
  - Title row: milestone title + phase number badge + status badge (color-coded: pending=gray, in-progress=blue, complete=green)
  - Progress bar: `.progress-bar-track` containing `.progress-bar-fill`
  - Progress percentage: computed as `Math.round((tasksCompleted / tasksTotal) * 100)` — handle tasksTotal=0 as 0%
  - Set `.progress-bar-fill` width via inline style: `style="width: ${percent}%"`
  - Stats line: "{tasksCompleted} of {tasksTotal} tasks complete"
  - Notes section: if `notes` is not null, render below stats in text-secondary color

**CRITICAL (Phase 1 decision):** Do NOT read a stored percentage. Calculate `tasksCompleted / tasksTotal` at render time. This is the "no computed fields stored" pattern from Phase 1.

**Add progress styles to `style.css`:**
- `.progress-tracker`: max-width for readability, margin auto
- `.milestone-card`: bg-secondary, border-radius, padding 1.5rem, margin-bottom 1rem
- `.milestone-title`: flex row with title and badges
- Status badges: small pill shapes with color-coded backgrounds
- `.progress-bar-track`: bg var(--border), border-radius 4px, height 8px, width 100%
- `.progress-bar-fill`: bg var(--accent), border-radius 4px, height 100%, transition width 0.3s ease
- `.progress-stats`: text-secondary, font-size smaller
- `.milestone-notes`: text-secondary, font-style italic, margin-top
  </action>
  <verify>
- Navigate to `#/progress` — shows 5 milestone cards
- Each milestone displays title, phase badge, status badge, progress bar, task counts, and notes
- Progress bars have correct width (e.g., milestone with 0/4 tasks shows 0% width)
- Progress percentage is calculated, not read from a stored field
- Browser DevTools Network tab shows fetches to `data/progress/index.json` and individual milestone files
- No leading-slash paths in any fetch call
  </verify>
  <done>Progress tracker renders milestones with computed progress bars from live JSON data</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify complete site visually</name>
  <files>app.js, style.css</files>
  <action>
Human verifies the complete SPA visually. Claude starts a local server (`python3 -m http.server 8000`) and presents verification steps to the user.

What was built: Complete SPA with three views — docs (markdown rendering), kanban (column board with color-coded cards), and progress (milestone tracker with progress bars). Dark theme, hash routing, responsive layout.

Verification steps:
1. Visit `http://localhost:8000` — should show dark-themed site with sidebar
2. Click "Architecture" in sidebar — markdown doc renders in main area
3. Click "Value Proposition" — different doc renders
4. Click "Kanban" — board shows 3 columns with cards, each card has colored left border
5. Click "Progress" — 5 milestone cards with progress bars
6. Resize browser to mobile width — layout should remain usable
7. Check browser DevTools Console — no errors
8. Check browser DevTools Network — no 404s, no absolute-path requests

Resume signal: Type "approved" to confirm site looks correct, or describe any issues to fix.
  </action>
  <verify>User confirms visual appearance is correct by typing "approved"</verify>
  <done>User has verified all three views render correctly with proper styling, data, and navigation</done>
</task>

</tasks>

<verification>
1. Navigate to `#/kanban` — three columns render with correct tasks from JSON
2. Cards show column-based color accents (gray for Backlog, blue for In Progress, green for Done)
3. Navigate to `#/progress` — five milestones render with progress bars
4. Progress bars show computed percentages (tasksCompleted / tasksTotal)
5. All three views (docs, kanban, progress) accessible via hash routing
6. No fetch paths with leading slashes
7. No console errors in browser DevTools
8. Human visual verification confirms layout, colors, and data rendering
</verification>

<success_criteria>
- Kanban board view renders columns and cards from `data/kanban/` with column-based color-coding
- Progress tracker view renders milestones from `data/progress/` with computed progress bars
- All data is fetched live from JSON files using the split-file fan-out pattern
- No stored computed values used — all percentages calculated at render time
- Site is visually verified by user
</success_criteria>

<output>
After completion, create `.planning/phases/02-static-site/02-02-SUMMARY.md`
</output>
