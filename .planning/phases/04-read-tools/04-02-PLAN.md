---
phase: 04-read-tools
plan: 02
type: execute
wave: 2
depends_on:
  - 04-01
files_modified: []
autonomous: false
requirements:
  - READ-01
  - READ-02
  - READ-03
  - READ-04
  - READ-05
  - INTG-01
  - INTG-02

must_haves:
  truths:
    - "Claude Code shows 4 tools from keloia server in /mcp status"
    - "Asking Claude to list available docs invokes keloia_list_docs without a prompt hint"
    - "Asking Claude to read a doc invokes keloia_read_doc and returns markdown content"
    - "Asking Claude to show the kanban board invokes keloia_get_kanban and returns denormalized data"
    - "Asking Claude to check milestone progress invokes keloia_get_progress and returns structured data"
    - "Requesting an invalid doc slug returns an error message naming available slugs"
  artifacts: []
  key_links: []
---

<objective>
Verify all four read tools work end-to-end in Claude Code.

Purpose: The success criteria for Phase 4 require that Claude Code selects the correct tool based on natural language — not a prompt hint naming the tool. This can only be verified by rebuilding the server and testing live in Claude Code.

Output: Verified that all tools appear in `/mcp`, respond correctly to natural language queries, and handle errors gracefully.
</objective>

<execution_context>
@/Users/enjat/.claude/get-shit-done/workflows/execute-plan.md
@/Users/enjat/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-read-tools/04-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rebuild MCP server with read tools</name>
  <files></files>
  <action>
Rebuild the MCP server so Claude Code picks up the new tools:

1. Run `cd /Users/enjat/Github/keloia/keloia-docs/mcp-server && npm run build` — verify zero errors
2. The server process in Claude Code must be restarted to pick up new dist/. Claude Code should do this automatically when the built files change, but if needed the user can restart it via `/mcp` menu.

After build, do a quick smoke test by examining the built output:
- `grep "keloia_list_docs" mcp-server/dist/tools/read.js` — confirms tool name in built output
- `grep "keloia_read_doc" mcp-server/dist/tools/read.js` — confirms tool name in built output
- `grep "keloia_get_kanban" mcp-server/dist/tools/read.js` — confirms tool name in built output
- `grep "keloia_get_progress" mcp-server/dist/tools/read.js` — confirms tool name in built output
  </action>
  <verify>
Build succeeds. All four tool names appear in the compiled `dist/tools/read.js` output.
  </verify>
  <done>
MCP server rebuilt with all four read tools compiled into dist/. Ready for Claude Code verification.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify read tools in Claude Code</name>
  <files></files>
  <action>
Human verification checkpoint. Four MCP read tools were built: keloia_list_docs, keloia_read_doc, keloia_get_kanban, keloia_get_progress — all registered and built into the keloia MCP server. The user must verify that Claude Code sees and correctly selects the tools from natural language queries.
  </action>
  <verify>
In a new Claude Code session (or after restarting the MCP server):

1. **Check tool registration:** Run `/mcp` — verify keloia server shows "connected" status and lists 4 tools (keloia_list_docs, keloia_read_doc, keloia_get_kanban, keloia_get_progress)

2. **Test keloia_list_docs:** Ask Claude: "list available docs" — should invoke keloia_list_docs and return slugs (architecture, value-proposition)

3. **Test keloia_read_doc:** Ask Claude: "read the architecture doc" — should invoke keloia_read_doc and return markdown content

4. **Test keloia_get_kanban:** Ask Claude: "show the kanban board" — should invoke keloia_get_kanban and return columns with embedded task objects

5. **Test keloia_get_progress:** Ask Claude: "check milestone progress" — should invoke keloia_get_progress and return milestone data with status and task counts

6. **Test error handling (READ-05):** Ask Claude: "read the doc called nonexistent-doc" — should invoke keloia_read_doc and return an error message listing available slugs
  </verify>
  <done>
All 6 checks pass: 4 tools visible in /mcp, each invoked correctly from natural language, error handling returns human-readable message with available slugs. Type "approved" or describe issues.
  </done>
</task>

</tasks>

<verification>
1. `/mcp` shows keloia connected with 4 tools
2. Natural language queries invoke the correct tool (no prompt hint needed)
3. Each tool returns the expected data format
4. Error case returns isError with available slugs listed
</verification>

<success_criteria>
- All 4 tools visible in Claude Code /mcp status
- Claude selects correct tool from natural language (success criteria 1-4 from ROADMAP)
- Error handling works for invalid inputs (success criterion 5 from ROADMAP)
</success_criteria>

<output>
After completion, create `.planning/phases/04-read-tools/04-02-SUMMARY.md`
</output>
